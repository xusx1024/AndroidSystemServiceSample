`把内存安排的明明白白之内存管理机制`

---

一个app启动,先实例化一个Linux进程,然后创建运行时环境,然后实例化application,然后创建app入口.

效率起见,进程的创建fork自一个叫做Zygote的进程,可以共享核心库,资源等.

app的内存管理类似于JVM

每个app独占一个进程,相当于一个独立的jvm沙盒

jvm的内存分为堆,程序计数器,方法区,本地方法栈,虚拟机栈.

android 虚拟机基于寄存器,jvm虚拟机基于堆栈

Dalvik 分页式管理内存,在管理内存时不必考虑内存碎片的问题,每次创建新的进程,检查所需空间和到尾端的大小即可

频繁GC 导致内存抖动

匿名共享内存,用于解决Binder过程中,传递数据超过1M的情况

Java层对匿名内存驱动的包装类是MemoryFile.

匿名共享内存实现的底层机制是通过管道的方式,两个进程拥有对内存区同一个文件的文件描述符

一端进行读操作,另一端进行写操作.






















